# textmake

音声ファイルをアップロードするとテキストファイルに変換してダウンロードできるシンプルな Web アプリです。OpenAI Whisper モデルを使用して音声を自動的に文字起こしします。

## セットアップ

1. 依存関係をインストールします。

   ```bash
   python -m venv .venv
   source .venv/bin/activate
   pip install -r requirements.txt
   ```

   > Whisper の利用には FFmpeg が必要です。未インストールの場合は各 OS の方法に従ってインストールしてください。

2. アプリケーションを起動します。

   ```bash
   flask --app app run --host 0.0.0.0 --port 5000 --debug
   ```

   初回実行時は Whisper モデルのダウンロードに時間がかかる場合があります。

3. ブラウザで `http://localhost:5000` にアクセスし、音声ファイルをアップロードしてください。変換が完了するとテキストファイルがダウンロードされます。

## 動作確認の手順

セットアップが完了したら、以下の流れでアプリをテストできます。

1. サンプル音声を用意します。手元の音声ファイルを使うか、[OpenAI Whisper のサンプル音声](https://cdn.openai.com/whisper/dictation-test.wav) などをダウンロードしてください。
2. 上記の手順でアプリを起動し、ブラウザでトップページにアクセスします。
3. 「音声ファイルを選択」ボタンからテスト用音声をアップロードし、「文字起こしを開始」ボタンを押します。
4. 文字起こしが成功すると、ブラウザが自動的にテキストファイル (`.txt`) のダウンロードを開始します。内容を開いて文字起こしが行われているか確認してください。
5. エラーが出た場合は、画面上部のメッセージや Flask のターミナルログを参照し、ファイル形式や FFmpeg の有無などを見直してください。

> Whisper モデルのダウンロードは初回のみ行われます。再度テストする際は、キャッシュ済みのモデルが利用されるため、変換時間が短縮されます。

## 環境変数

| 変数名 | 説明 | 既定値 |
| ------ | ---- | ------ |
| `TEXTMAKE_SECRET_KEY` | Flask のセッション管理に使用するシークレットキー | `change-this-secret` |
| `TEXTMAKE_WHISPER_MODEL` | 使用する Whisper モデル名 (`tiny`, `base`, `small`, `medium`, `large` など) | `base` |

## ライセンス

MIT License
