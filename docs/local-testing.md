# ローカル動作確認ガイド

Whisper ベースの文字起こしアプリをローカル環境でテストするための手順をまとめています。事前に `README.md` に記載のセットアップを完了してから実施してください。

## 1. サンプル音声の準備

- 手元にある任意の音声ファイル (mp3 / wav / m4a など) を利用できます。
- サンプルが必要な場合は、[OpenAI Whisper のデモ音声](https://cdn.openai.com/whisper/dictation-test.wav) をダウンロードしてください。

## 2. アプリを起動する

```bash
flask --app app run --host 0.0.0.0 --port 5000 --debug
```

初回起動時は Whisper モデルのダウンロードが入るため数分待つ場合があります。

## 3. ブラウザで操作を確認する

1. ブラウザから `http://localhost:5000` を開く。
2. 「音声ファイルを選択」ボタンでテスト用の音声をアップロードする。
3. 「文字起こしを開始」をクリックし、完了メッセージと同時にテキストファイルのダウンロードが始まることを確認する。
4. ダウンロードされた `.txt` ファイルを開き、音声内容が文字起こしされているか確認する。

## 4. エラー発生時のチェックリスト

- 入力ファイルの拡張子がサポート対象か (`.wav`, `.mp3`, `.m4a`, `.ogg`, `.flac` など)。
- FFmpeg がインストールされているか。未導入の場合は OS に合わせて追加してください。
- Whisper モデルのダウンロードに失敗していないか。ネットワーク接続を確認し、再実行してください。
- コンソールにスタックトレースが表示された場合はログ内容を確認し、問題箇所を特定します。

## 5. 再テストのポイント

- Whisper モデルは一度ダウンロードされるとキャッシュされるため、2 回目以降はより短時間で変換が終わります。
- 大きな音声ファイルで時間がかかる場合は、短い音声で動作確認を先に行ってください。

## 参考

- Flask のログ (`flask --app app run` を実行したターミナル) には、アップロードや変換時の詳細が出力されます。
- `instance/` ディレクトリにセッション関連ファイルが生成される場合があります。不要になったら削除して構いません。
- アプリのセットアップや UI の概要は「[音声文字起こし Web アプリ作成ガイド](create-web-app-for-audio-file-transcription-Bulab.md)」にも整理しています。
- 環境変数などの設定項目は「[設定リファレンス](configuration.md)」を参照してください。
